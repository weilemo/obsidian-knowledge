# Ultrawork 模式（工具说明）

## 用途
- 以“零妥协、高确定性、可验证”为核心的工作模式
- 强制充分理解、并行探索、计划优先、证据驱动交付

## 适用场景
- 复杂需求、开放式任务、跨模块改动
- 需要严格验证与可追溯流程的工程任务

## 启动规则
- 进入模式后，首条回复必须包含固定短语：`ULTRAWORK MODE ENABLED!`
- 开始实现前必须 100% 理解需求，消除一切歧义
- 任何工具/代理调用前必须输出“派工预览”，包含：
  - 调用的 agent/category
  - 完整 prompt 原文
  - 期望输出格式（要点列表）

## 工作流程
1. 意图门禁：确认用户真实目标与边界条件
2. 全面探索：并行 explore/librarian + 直接工具检索
3. 计划优先：调用 Plan 代理生成步骤与技能/类别建议
4. 分类委派：按类别 + 技能派发实现任务
5. 证据验证：定义成功标准，执行测试与人工验证
6. 交付回收：确保所有 TODO 完成，关闭后台任务

## 代理与并行策略
- 探索：explore 代理负责代码库结构与模式
- 资料：librarian 代理负责外部文档与示例
- 规划：plan 代理负责拆解步骤与推荐技能
- 复杂决策：oracle 代理提供高质量推理

## 关键约束
- 不做假设，不交付简化版，不缺步骤
- 发现歧义先调查/提问，不硬猜
- 多步任务必须使用 TODO，逐项 in_progress/完成

## 成功标准与测试计划
### 成功标准
- 功能、可观察、通过/失败三类标准必须明确
- 任何“完成”都要有可验证证据

### Test Plan 模板
```text
## Test Plan
### Objective: [验证目标]
### Prerequisites: [前置条件]
### Test Cases:
1. [用例名]: [输入] -> [期望输出] -> [验证方法]
2. ...
### Success Criteria: ALL test cases pass
### How to Execute: [具体命令/步骤]
```

## 失败恢复
- 连续失败 >= 3：停止编辑 -> 回滚 -> 记录 -> Oracle -> 再行动

## 快速清单
- [ ] 需求无歧义
- [ ] 并行探索完成
- [ ] 已调用 Plan 代理
- [ ] 成功标准 + Test Plan 已定义
- [ ] 证据齐全、TODO 全部完成
